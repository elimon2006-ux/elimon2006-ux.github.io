<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mi Pedido</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="navbar">
    <div class="nav-left"><a class="nav-title" href="index.html">üçΩÔ∏è Mi Restaurante</a></div>
    <div class="nav-right">
        <a href="menu.html">Seguir pidiendo</a>
        <a href="dashboard.html">Mi cuenta</a>
    </div>
</nav>

<h1 class="titulo">Tu Pedido</h1>

<div id="mensaje-exito" class="flash-container" style="display:none; background:#2a4a2a; color:#c8ffc8; padding:15px; margin:20px auto; border-radius:8px; width:50%;">
    ¬°Pedido confirmado exitosamente! La cocina est√° preparando tus alimentos.
</div>

<table id="tabla-pedido">
    <thead>
        <tr>
            <th>Platillo</th>
            <th>Precio Unitario</th>
            <th>Cantidad</th>
            <th>Subtotal</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        <tr class="item-fila">
            <td>Taco al pastor</td>
            <td class="precio" data-valor="18.0">$18.0</td>
            <td>
                <span class="cantidad">2</span>
            </td>
            <td class="subtotal">$36.0</td>
            <td>
                <button class="btn btn-outline" onclick="cambiarCantidad(this, 1)">+</button>
                <button class="btn btn-outline" onclick="cambiarCantidad(this, -1)">-</button>
                <button class="btn btn-outline" style="border-color:#800000; color:#ffbaba;" onclick="eliminarFila(this)">X</button>
            </td>
        </tr>

        <tr class="item-fila">
            <td>Enchiladas verdes</td>
            <td class="precio" data-valor="80.0">$80.0</td>
            <td>
                <span class="cantidad">1</span>
            </td>
            <td class="subtotal">$80.0</td>
            <td>
                <button class="btn btn-outline" onclick="cambiarCantidad(this, 1)">+</button>
                <button class="btn btn-outline" onclick="cambiarCantidad(this, -1)">-</button>
                <button class="btn btn-outline" style="border-color:#800000; color:#ffbaba;" onclick="eliminarFila(this)">X</button>
            </td>
        </tr>

        <tr class="item-fila">
            <td>Flan napolitano</td>
            <td class="precio" data-valor="40.0">$40.0</td>
            <td>
                <span class="cantidad">1</span>
            </td>
            <td class="subtotal">$40.0</td>
            <td>
                <button class="btn btn-outline" onclick="cambiarCantidad(this, 1)">+</button>
                <button class="btn btn-outline" onclick="cambiarCantidad(this, -1)">-</button>
                <button class="btn btn-outline" style="border-color:#800000; color:#ffbaba;" onclick="eliminarFila(this)">X</button>
            </td>
        </tr>
    </tbody>
</table>

<h2 style="margin-top:20px;">Total: <span id="gran-total">$156.0</span></h2>

<button onclick="confirmarPedido()" class="btn" style="margin-top: 20px; font-size:20px;">Confirmar Pedido</button>

<script>
    function actualizarTotal() {
        let total = 0;
        const filas = document.querySelectorAll('.item-fila');
        
        filas.forEach(fila => {
            const precio = parseFloat(fila.querySelector('.precio').getAttribute('data-valor'));
            const cantidad = parseInt(fila.querySelector('.cantidad').innerText);
            const subtotal = precio * cantidad;
            
            // Actualizar subtotal visual
            fila.querySelector('.subtotal').innerText = '$' + subtotal.toFixed(1);
            total += subtotal;
        });

        // Actualizar Gran Total
        document.getElementById('gran-total').innerText = '$' + total.toFixed(1);
    }

    function cambiarCantidad(btn, cambio) {
        const fila = btn.closest('tr');
        const spanCantidad = fila.querySelector('.cantidad');
        let cantidad = parseInt(spanCantidad.innerText);
        
        cantidad += cambio;
        if (cantidad < 1) cantidad = 1; // No dejar bajar de 1
        
        spanCantidad.innerText = cantidad;
        actualizarTotal();
    }

    function eliminarFila(btn) {
        if(confirm("¬øEliminar este platillo?")) {
            btn.closest('tr').remove();
            actualizarTotal();
        }
    }

    function confirmarPedido() {
        // Ocultar la tabla y botones
        document.getElementById('tabla-pedido').style.display = 'none';
        document.querySelector('h2').style.display = 'none'; 
        document.querySelector('button[onclick="confirmarPedido()"]').style.display = 'none'; 
        
        // Mostrar mensaje de √©xito
        const mensaje = document.getElementById('mensaje-exito');
        mensaje.style.display = 'block';
    }
</script>

</body>
</html>
